var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,e){c=b(c,d);e&&Reflect.setPrototypeOf(c,e.prototype);return c}}return function(c,d,e){void 0===e&&(e=c);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(c,e,d)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,d){try{return b(c,d),!0}catch(e){return!1}}}return null},"es6","es5");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}},"es6","es3");OV.FeatureSet={};OV.EventHandler=function(a){this.eventHandler=a};OV.EventHandler.prototype.HandleEvent=function(a,b){void 0!==this.eventHandler&&null!==this.eventHandler&&this.eventHandler(a,b)};OV.GetNameOrDefault=function(a,b){return 0<a.length?a:b};OV.GetMeshName=function(a){return OV.GetNameOrDefault(a,"No Name")};OV.GetMaterialName=function(a){return OV.GetNameOrDefault(a,"No Name")};OV.IsHoverEnabled=function(){return window.matchMedia("(hover : hover)").matches?!0:!1};OV.IsSmallWidth=function(){return window.matchMedia("(max-width : 700px)").matches?!0:!1};OV.IsSmallHeight=function(){return window.matchMedia("(max-height : 700px)").matches?!0:!1};
OV.InstallTooltip=function(a,b){if(OV.IsHoverEnabled()){var c=$(document.body),d=null;a.hover(function(){var e=d=$("<div>").html(b).addClass("ov_tooltip").appendTo(c),f=e.offset,g=d,h=$(window).outerWidth(!0),l=a.offset(),k=a.outerWidth(!0),m=a.outerHeight(!0);g=g.outerWidth(!0);k=l.left+k/2-g/2;k+g>h-10&&(k=h-g-10);10>k&&(k=10);k=Math.max(k,0);f.call(e,{left:k,top:l.top+m+10})},function(){d.remove()})}};
OV.CopyToClipboard=function(a){var b=document.createElement("input");b.style.position="absolute";b.style.left="0";b.style.top="0";b.setAttribute("value",a);document.body.appendChild(b);b.select();document.execCommand("copy");document.body.removeChild(b)};OV.DownloadUrlAsFile=function(a,b){var c=document.createElement("a");c.href=a;c.download=b;document.body.appendChild(c);c.click();document.body.removeChild(c)};
OV.DownloadArrayBufferAsFile=function(a,b){a=OV.CreateObjectUrl(a);OV.DownloadUrlAsFile(a,b)};OV.CreateSvgIcon=function(a,b,c){a=$("<div>").addClass("ov_svg_icon").appendTo(a);$("<i>").addClass("icon").addClass("icon-"+b).appendTo(a);void 0!==c&&null!==c&&a.addClass(c);return a};OV.SetSvgIconImage=function(a,b){a.empty();$("<i>").addClass("icon").addClass("icon-"+b).appendTo(a)};
OV.CreateHeaderButton=function(a,b,c){var d=$("<a>");d.attr("href",c);d.attr("target","_blank");d.attr("rel","noopener noreferrer");OV.InstallTooltip(d,b);OV.CreateSvgIcon(d,a,"header_button");return d};OV.CreateInlineColorCircle=function(a){var b="#"+OV.ColorToHexString(a);a=new OV.Color(Math.max(0,a.r-50),Math.max(0,a.g-50),Math.max(0,a.b-50));a="#"+OV.ColorToHexString(a);return $("<div>").addClass("ov_color_circle").css("background",b).css("border","1px solid "+a)};OV.CookieHandler=function(){this.expirationDays=365};OV.CookieHandler.prototype.ClearVal=function(a){this.SetStringVal(a,"")};OV.CookieHandler.prototype.SetStringVal=function(a,b){var c=new Date;c.setTime(c.getTime()+864E5*this.expirationDays);document.cookie=a+"="+b+"; expires="+c.toUTCString()+";"};OV.CookieHandler.prototype.GetStringVal=function(a){for(var b=decodeURIComponent(document.cookie).split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(d.startsWith(a+"="))return d.substr(a.length+1)}return null};
OV.CookieHandler.prototype.GetBoolVal=function(a,b){a=this.GetStringVal(a);return null===a?b:"true"===a?!0:!1};OV.CookieHandler.prototype.SetBoolVal=function(a,b){this.SetStringVal(a,b?"true":"false")};OV.CookieHandler.prototype.GetColorVal=function(a,b){a=this.GetStringVal(a);return null===a?b:OV.ParameterConverter.StringToColor(a)};OV.CookieHandler.prototype.SetColorVal=function(a,b){this.SetStringVal(a,OV.ParameterConverter.ColorToString(b))};OV.ToolbarButton=function(a,b,c){this.image=a;this.imageTitle=b;this.onClick=c;this.selected=!1;this.buttonImg=this.buttonDiv=null};OV.ToolbarButton.prototype.CreateDomElement=function(a){this.buttonDiv=$("<div>").addClass("ov_toolbar_button").appendTo(a);this.buttonImg=OV.CreateSvgIcon(this.buttonDiv,this.image);null!==this.onClick&&this.buttonDiv.click(this.onClick);this.buttonDiv.attr("alt",this.imageTitle);OV.InstallTooltip(this.buttonDiv,this.imageTitle)};
OV.ToolbarButton.prototype.AddClass=function(a){this.buttonDiv.addClass(a)};OV.ToolbarButton.prototype.RemoveClass=function(a){this.buttonDiv.removeClass(a)};OV.ToolbarButton.prototype.AddImageClass=function(a){this.buttonImg.addClass(a)};OV.ToolbarButton.prototype.RemoveImageClass=function(a){this.buttonImg.removeClass(a)};OV.ToolbarButton.prototype.SetSelected=function(a){(this.selected=a)?this.buttonDiv.addClass("selected"):this.buttonDiv.removeClass("selected")};
OV.Toolbar=function(a){this.mainDiv=$("<div>").addClass("ov_toolbar").appendTo(a)};OV.Toolbar.prototype.AddImageButton=function(a,b,c){a=new OV.ToolbarButton(a,b,c);a.CreateDomElement(this.mainDiv);return a};
OV.Toolbar.prototype.AddImageRadioButton=function(a,b,c){for(var d=[],e={$jscomp$loop$prop$buttonIndex$10:0};e.$jscomp$loop$prop$buttonIndex$10<a.length;e={$jscomp$loop$prop$buttonIndex$10:e.$jscomp$loop$prop$buttonIndex$10},e.$jscomp$loop$prop$buttonIndex$10++){var f=a[e.$jscomp$loop$prop$buttonIndex$10];f=this.AddImageButton(f.image,f.title,function(g){return function(){for(var h=0;h<d.length;h++){var l=d[h];h===g.$jscomp$loop$prop$buttonIndex$10?l.SetSelected(!0):l.SetSelected(!1)}c(g.$jscomp$loop$prop$buttonIndex$10)}}(e));
b===e.$jscomp$loop$prop$buttonIndex$10&&f.SetSelected(!0);d.push(f)}return d};OV.Toolbar.prototype.AddSeparator=function(){return $("<div>").addClass("ov_toolbar_separator").appendTo(this.mainDiv)};OV.ScrollToView=function(a){a[0].scrollIntoView({behavior:"smooth",block:"nearest"})};OV.TreeViewButton=function(a){this.imagePath=a;this.clickHandler=this.domElement=null};OV.TreeViewButton.prototype.SetImage=function(a){this.imagePath=a;OV.SetSvgIconImage(this.domElement,this.imagePath)};OV.TreeViewButton.prototype.OnClick=function(a){this.clickHandler=a};
OV.TreeViewButton.prototype.CreateDomElement=function(a){this.domElement=OV.CreateSvgIcon(a,this.imagePath,"ov_tree_item_button");this.domElement.attr("src",this.imagePath);null!==this.clickHandler&&this.domElement.click(this.clickHandler)};OV.TreeViewItem=function(a){this.name=a;this.nameElement=this.mainElement=null};OV.TreeViewItem.prototype.GetName=function(){return this.name};OV.TreeViewItem.prototype.SetName=function(a){this.name=a};
OV.TreeViewItem.prototype.CreateMainElement=function(a){this.mainElement=$("<div>").addClass("ov_tree_item").attr("title",this.name).appendTo(a)};OV.TreeViewItem.prototype.CreateNameElement=function(){this.nameElement=$("<div>").addClass("ov_tree_item_name").html(this.name).appendTo(this.mainElement)};OV.TreeViewSingleItem=function(a){OV.TreeViewItem.call(this,a);this.parent=null;this.selected=!1};$jscomp.inherits(OV.TreeViewSingleItem,OV.TreeViewItem);
OV.TreeViewSingleItem.prototype.SetSelected=function(a){var b=this;(this.selected=a)?(this.mainElement.addClass("selected"),this.parent.ShowChildren(!0,function(){OV.ScrollToView(b.mainElement)})):this.mainElement.removeClass("selected")};OV.TreeViewSingleItem.prototype.SetParent=function(a){this.parent=a};OV.TreeViewSingleItem.prototype.CreateDomElement=function(a){this.CreateMainElement(a);this.CreateNameElement()};
OV.TreeViewButtonItem=function(a){OV.TreeViewSingleItem.call(this,a);this.buttons=[];this.onNameClick=null};$jscomp.inherits(OV.TreeViewButtonItem,OV.TreeViewSingleItem);OV.TreeViewButtonItem.prototype.OnNameClick=function(a){this.onNameClick=a};OV.TreeViewButtonItem.prototype.AddButton=function(a){this.buttons.push(a)};
OV.TreeViewButtonItem.prototype.CreateDomElement=function(a){var b=this;this.CreateMainElement(a);this.mainElement.addClass("clickable");a=$("<div>").addClass("ov_tree_item_button_container").appendTo(this.mainElement);for(var c=0;c<this.buttons.length;c++)this.buttons[c].CreateDomElement(a);this.CreateNameElement();null!==this.onNameClick&&(this.nameElement.css("cursor","pointer"),this.nameElement.click(function(d){b.onNameClick()}))};
OV.TreeViewGroupItem=function(a,b){OV.TreeViewItem.call(this,a);this.iconPath=b;this.childrenDiv=null;this.showChildren=!1;this.openCloseButton=null;this.openButtonIcon="arrow_down";this.closeButtonIcon="arrow_up";this.animated=!0;this.openCloseHandler=null};$jscomp.inherits(OV.TreeViewGroupItem,OV.TreeViewItem);OV.TreeViewGroupItem.prototype.GetName=function(){return this.name};OV.TreeViewGroupItem.prototype.SetName=function(a){this.name=a};
OV.TreeViewGroupItem.prototype.SetAnimated=function(a){this.animated=a};OV.TreeViewGroupItem.prototype.SetOpenCloseHandler=function(a){this.openCloseHandler=a};
OV.TreeViewGroupItem.prototype.ShowChildren=function(a,b){this.showChildren=a;null!==this.childrenDiv&&(a?(OV.SetSvgIconImage(this.openCloseButton,this.openButtonIcon),this.animated?this.childrenDiv.slideDown(400,b):(this.childrenDiv.show(),b&&b())):(OV.SetSvgIconImage(this.openCloseButton,this.closeButtonIcon),this.animated?this.childrenDiv.slideUp(400,b):(this.childrenDiv.hide(),b&&b())))};
OV.TreeViewGroupItem.prototype.CreateChildrenDiv=function(){var a=this;null===this.childrenDiv&&(this.childrenDiv=$("<div>").addClass("ov_tree_view_children").insertAfter(this.mainElement),this.mainElement.addClass("clickable"),this.ShowChildren(this.showChildren,null),this.mainElement.click(function(b){a.showChildren=!a.showChildren;a.ShowChildren(a.showChildren,null);null!==a.openCloseHandler&&a.openCloseHandler()}));return this.childrenDiv};OV.TreeViewGroupItem.prototype.GetChildrenDiv=function(){return this.childrenDiv};
OV.TreeViewGroupItem.prototype.AddChild=function(a){this.CreateChildrenDiv();a.SetParent(this);a.CreateDomElement(this.childrenDiv)};OV.TreeViewGroupItem.prototype.CreateDomElement=function(a){this.CreateMainElement(a);OV.CreateSvgIcon(this.mainElement,this.iconPath,"ov_tree_item_icon");a=$("<div>").addClass("ov_tree_item_button_container").appendTo(this.mainElement);this.openCloseButton=OV.CreateSvgIcon(a,this.openButtonIcon,"ov_tree_item_button");this.CreateNameElement()};
OV.TreeView=function(a){this.mainDiv=$("<div>").addClass("ov_tree_view").appendTo(a)};OV.TreeView.prototype.AddItem=function(a){a.CreateDomElement(this.mainDiv)};OV.TreeView.prototype.Clear=function(){this.mainDiv.empty()};OV.Modal=function(){this.modalDiv=$("<div>").css("position","absolute");this.closeHandler=this.positionCalculator=this.resizeHandler=this.overlayDiv=null;this.isOpen=!1;this.closeable=!0};OV.Modal.prototype.GetContentDiv=function(){return this.modalDiv};OV.Modal.prototype.SetCloseable=function(a){this.closeable=a};OV.Modal.prototype.SetPositionCalculator=function(a){this.positionCalculator=a};OV.Modal.prototype.SetCloseHandler=function(a){this.closeHandler=a};
OV.Modal.prototype.Open=function(){var a=this,b=$(window),c=$(document.body);this.overlayDiv=$("<div>").addClass("ov_modal_overlay").appendTo(c);this.modalDiv.appendTo(c);this.resizeHandler=this.Resize.bind(this);b.bind("resize",this.resizeHandler);this.closeable&&(this.overlayDiv.click(function(d){d.preventDefault();a.Close()}),this.overlayDiv.contextmenu(function(d){d.preventDefault();a.Close()}));this.isOpen=!0;this.Resize()};
OV.Modal.prototype.Close=function(){this.isOpen&&($(window).unbind("resize",this.resizeHandler),null!==this.closeHandler&&this.closeHandler(),this.modalDiv.remove(),this.overlayDiv.remove(),this.resizeHandler=this.overlayDiv=null,this.isOpen=!1)};OV.Modal.prototype.IsOpen=function(){return this.isOpen};
OV.Modal.prototype.Resize=function(){var a=$(window),b=a.outerWidth();a=a.outerHeight();this.overlayDiv.width(b);this.overlayDiv.height(a);this.overlayDiv.offset({left:0,top:0});b=(b-this.modalDiv.outerWidth())/2;a=(a-this.modalDiv.outerHeight())/3;null!==this.positionCalculator&&(a=this.positionCalculator(),b=a.x,a=a.y);this.modalDiv.offset({left:b,top:a})};OV.Dialog=function(){this.modal=new OV.Modal};OV.Dialog.prototype.GetContentDiv=function(){return this.modal.GetContentDiv()};
OV.Dialog.prototype.SetCloseable=function(a){this.modal.SetCloseable(a)};OV.Dialog.prototype.SetCloseHandler=function(a){this.modal.SetCloseHandler(a)};OV.Dialog.prototype.SetPositionCalculator=function(a){this.modal.SetPositionCalculator(a)};OV.Dialog.prototype.Show=function(){this.modal.Open()};OV.Dialog.prototype.Hide=function(){this.modal.Close()};OV.ProgressDialog=function(){OV.Dialog.call(this);this.modal.SetCloseable(!1);this.textDiv=this.imageDiv=null};$jscomp.inherits(OV.ProgressDialog,OV.Dialog);
OV.ProgressDialog.prototype.Init=function(a){var b=this.modal.GetContentDiv();b.addClass("ov_progress");this.imageDiv=$("<img>").addClass("ov_progress_img").attr("src","assets/images/3dviewer_net_logo.svg").appendTo(b);this.textDiv=$("<div>").addClass("ov_progress_text").appendTo(b);this.SetText(a)};OV.ProgressDialog.prototype.SetText=function(a){this.textDiv.html(a)};OV.ButtonDialog=function(){OV.Dialog.call(this)};$jscomp.inherits(OV.ButtonDialog,OV.Dialog);
OV.ButtonDialog.prototype.Init=function(a,b){function c(f,g){g=$("<div>").addClass("ov_button").addClass("ov_dialog_button").html(f.name).appendTo(g);f.subClass&&g.addClass(f.subClass);g.click(function(){f.onClick()})}var d=this.modal.GetContentDiv();d.addClass("ov_dialog");$("<div>").addClass("ov_dialog_title").html(a).appendTo(d);a=$("<div>").addClass("ov_dialog_content").appendTo(d);d=$("<div>").addClass("ov_dialog_buttons").appendTo(d);d=$("<div>").addClass("ov_dialog_buttons_inner").appendTo(d);
for(var e=0;e<b.length;e++)c(b[e],d);return a};OV.PopupDialog=function(){OV.Dialog.call(this)};$jscomp.inherits(OV.PopupDialog,OV.Dialog);OV.PopupDialog.prototype.Init=function(a){var b=this.modal.GetContentDiv();b.addClass("ov_popup");this.modal.SetPositionCalculator(a);return b};OV.ListPopup=function(){OV.PopupDialog.call(this);this.listDiv=null};$jscomp.inherits(OV.ListPopup,OV.PopupDialog);
OV.ListPopup.prototype.Init=function(a){a=OV.PopupDialog.prototype.Init.call(this,a);this.listDiv=$("<div>").addClass("ov_popup_list").addClass("ov_thin_scrollbar").appendTo(a);return a};
OV.ListPopup.prototype.AddListItem=function(a,b){var c=$("<div>").addClass("ov_popup_list_item").appendTo(this.listDiv);a.icon&&OV.CreateSvgIcon(c,a.icon,"left_inline");if(a.color){var d=$("<div>").addClass("ov_popup_list_item_icon").appendTo(c);OV.CreateInlineColorCircle(a.color).appendTo(d)}$("<div>").addClass("ov_popup_list_item_name").html(a.name).appendTo(c);c.click(b.onClick);OV.IsHoverEnabled()&&b.onHoverStart&&b.onHoverStop&&c.hover(function(){b.onHoverStart()},function(){b.onHoverStop()})};OV.ShowMessageDialog=function(a,b,c){var d=new OV.ButtonDialog;a=d.Init(a,[{name:"OK",onClick:function(){d.Hide()}}]);$("<div>").addClass("ov_dialog_message").html(b).appendTo(a);null!==c&&$("<div>").addClass("ov_dialog_submessage").html("<i>"+c+"</i>").appendTo(a);d.Show();return d};
OV.ShowListPopup=function(a,b){if(0===a.length)return null;var c=new OV.ListPopup;c.Init(function(){return b.calculatePosition(c.GetContentDiv())});for(var d={$jscomp$loop$prop$i$14:0};d.$jscomp$loop$prop$i$14<a.length;d={$jscomp$loop$prop$i$14:d.$jscomp$loop$prop$i$14},d.$jscomp$loop$prop$i$14++)c.AddListItem(a[d.$jscomp$loop$prop$i$14],{onHoverStart:function(e){return function(){if(b.onHoverStart)b.onHoverStart(e.$jscomp$loop$prop$i$14)}}(d),onHoverStop:function(e){return function(){if(b.onHoverStop)b.onHoverStop(e.$jscomp$loop$prop$i$14)}}(d),
onClick:function(e){return function(){c.Hide();b.onClick(e.$jscomp$loop$prop$i$14)}}(d)});c.Show();return c};OV.CalculatePopupPositionToElementBottomRight=function(a,b){var c=a.offset();return{x:c.left+a.outerWidth(!1),y:c.top+a.outerHeight(!1)-b.outerHeight(!0)}};OV.CalculatePopupPositionToScreen=function(a,b){var c=$(window),d=c.outerWidth();c=c.outerHeight();var e=a.x;a=a.y;var f=e+b.outerWidth(!0);b=a+b.outerHeight(!0);f>d&&(e-=f-d);b>c&&(a-=b-c);return{x:e,y:a}};OV.ShowOpenUrlDialog=function(a){function b(f){for(var g=0;g<f.length;g++){var h=f[g];if(-1!==h.search(/www\.dropbox\.com/u)){h=h.replace("www.dropbox.com","dl.dropbox.com");var l=h.indexOf("?");-1!==l&&(h=h.substr(0,l));f[g]=h}else-1!==h.search(/github\.com/u)&&(h=h.replace("github.com","raw.githubusercontent.com"),h=h.replace("/blob",""),l=h.indexOf("?"),-1!==l&&(h=h.substr(0,l)),f[g]=h)}}var c=new OV.ButtonDialog,d=$("<textarea>").addClass("ov_dialog_textarea"),e=c.Init("Open Model from Url",[{name:"Cancel",
subClass:"outline",onClick:function(){c.Hide()}},{name:"OK",onClick:function(){var f=[];OV.ReadLines(d.val(),function(g){f.push(g)});c.Hide();b(f);a(f)}}]);$("<div>").html("Here you can load models based on their urls. You can add more lines if your model builds up from multiple files.").addClass("ov_dialog_section").appendTo(e);d.appendTo(e);c.Show();d.focus();return c};OV.ExportType={Model:1,Image:2};
OV.ExportDialog=function(a){this.callbacks=a;this.model=null;this.exportFormats=[{name:"obj",formats:[{name:"text",type:OV.ExportType.Model,format:OV.FileFormat.Text,extension:"obj"}]},{name:"stl",formats:[{name:"text",type:OV.ExportType.Model,format:OV.FileFormat.Text,extension:"stl"},{name:"binary",type:OV.ExportType.Model,format:OV.FileFormat.Binary,extension:"stl"}]},{name:"ply",formats:[{name:"text",type:OV.ExportType.Model,format:OV.FileFormat.Text,extension:"ply"},{name:"binary",type:OV.ExportType.Model,
format:OV.FileFormat.Binary,extension:"ply"}]},{name:"gltf",formats:[{name:"text",type:OV.ExportType.Model,format:OV.FileFormat.Text,extension:"gltf"},{name:"binary",type:OV.ExportType.Model,format:OV.FileFormat.Binary,extension:"glb"}]},{name:"off",formats:[{name:"text",type:OV.ExportType.Model,format:OV.FileFormat.Text,extension:"off"}]},{name:"3dm",formats:[{name:"binary",type:OV.ExportType.Model,format:OV.FileFormat.Binary,extension:"3dm"}]},{name:"png",formats:[{name:"current size",type:OV.ExportType.Image,
width:null,height:null,extension:"png"},{name:"fixed size (1920x1080)",type:OV.ExportType.Image,width:1920,height:1080,extension:"png"}]}];this.formatParameters={exportFormatButtonDivs:[],formatSettingsDiv:null,selectedFormat:null}};
OV.ExportDialog.prototype.Show=function(a,b){var c=this;if(null===a){var d=OV.ShowMessageDialog("Export Failed","Please load a model before exporting.",null);this.callbacks.onDialog(d)}else{var e=new OV.ButtonDialog,f=e.Init("Export",[{name:"Close",subClass:"outline",onClick:function(){e.Hide()}},{name:"Export",onClick:function(){null!==c.formatParameters.selectedFormat&&(e.Hide(),c.ExportFormat(a,b))}}]);$("<div>").html("Select a format from the below list to export your model. Please note that the export can take several second.").addClass("ov_dialog_section").appendTo(f);
d=$("<div>").addClass("ov_dialog_select").appendTo(f);this.formatParameters.formatSettingsDiv=$("<div>").addClass("ov_dialog_section").height(50).appendTo(f);for(f={$jscomp$loop$prop$i$16:0};f.$jscomp$loop$prop$i$16<this.exportFormats.length;f={$jscomp$loop$prop$i$16:f.$jscomp$loop$prop$i$16},f.$jscomp$loop$prop$i$16++){var g=this.exportFormats[f.$jscomp$loop$prop$i$16];g=$("<div>").addClass("ov_button").addClass("outline").addClass("ov_dialog_select_option").html(g.name).width(40).appendTo(d);this.formatParameters.exportFormatButtonDivs.push(g);
g.click(function(h){return function(){c.OnExportFormatSelect(h.$jscomp$loop$prop$i$16)}}(f))}this.OnExportFormatSelect(0);e.Show();this.callbacks.onDialog(e)}};
OV.ExportDialog.prototype.OnExportFormatSelect=function(a){var b=this;this.formatParameters.formatSettingsDiv.empty();for(var c=0;c<this.formatParameters.exportFormatButtonDivs.length;c++){var d=this.formatParameters.exportFormatButtonDivs[c];c===a?d.removeClass("outline"):d.addClass("outline")}a=this.exportFormats[a];c={};for(d=0;d<a.formats.length;c={$jscomp$loop$prop$format$18:c.$jscomp$loop$prop$format$18},d++){c.$jscomp$loop$prop$format$18=a.formats[d];var e=$("<div>").addClass("ov_dialog_row").appendTo(this.formatParameters.formatSettingsDiv),
f=$("<input>").addClass("ov_dialog_checkradio").attr("type","radio").attr("id",c.$jscomp$loop$prop$format$18.name).attr("name","format").appendTo(e);$("<label>").attr("for",c.$jscomp$loop$prop$format$18.name).html(c.$jscomp$loop$prop$format$18.name).appendTo(e);0===d&&(f.prop("checked",!0),this.formatParameters.selectedFormat=c.$jscomp$loop$prop$format$18);f.change(function(g){return function(){b.formatParameters.selectedFormat=g.$jscomp$loop$prop$format$18}}(c))}};
OV.ExportDialog.prototype.ExportFormat=function(a,b){var c=this,d=this.formatParameters.selectedFormat;if(null!==d)if(d.type===OV.ExportType.Model){var e=new OV.ProgressDialog;e.Init("Exporting Model");e.Show();OV.RunTaskAsync(function(){(new OV.Exporter).Export(a,d.format,d.extension,{onError:function(){e.Hide()},onSuccess:function(g){0===g.length?e.Hide():1===g.length?(e.Hide(),g=g[0],OV.DownloadArrayBufferAsFile(g.GetContent(),g.GetName())):1<g.length&&(e.Hide(),c.ShowExportedFiles(g))}})})}else if(d.type===
OV.ExportType.Image){var f=null;null===d.width||null===d.height?(f=b.GetImageSize(),f=b.GetImageAsDataUrl(f.width,f.height)):f=b.GetImageAsDataUrl(d.width,d.height);OV.DownloadUrlAsFile(f,"model."+d.extension)}};
OV.ExportDialog.prototype.ShowExportedFiles=function(a){var b=new OV.ButtonDialog,c=b.Init("Exported Files",[{name:"Close",onClick:function(){b.Hide()}}]);$("<div>").html("You can download your exported files here.").addClass("ov_dialog_section").appendTo(c);c=$("<div>").addClass("ov_dialog_section").appendTo(c);c=$("<div>").addClass("ov_dialog_file_list").addClass("ov_thin_scrollbar").appendTo(c);for(var d=0;d<a.length;d++){var e=a[d],f=OV.CreateObjectUrl(e.GetContent()),g=$("<a>").addClass("ov_dialog_file_link").appendTo(c);
g.attr("href",f);g.attr("download",e.GetName());OV.CreateSvgIcon(g,"file_download","ov_file_link_img");$("<div>").addClass("ov_dialog_file_link_text").html(e.GetName()).appendTo(g)}b.Show();this.callbacks.onDialog(b)};OV.ShowSharingDialog=function(a,b,c){function d(m,n,p,q){m=$("<div>").addClass("ov_dialog_row").appendTo(m);var r=$("<input>").attr("type","checkbox").attr("checked","true").addClass("ov_dialog_checkradio").attr("id",p).appendTo(m);$("<label>").attr("for",p).html(n).appendTo(m);r.change(function(){q(r.prop("checked"))})}function e(m){var n=OV.CreateUrlBuilder();n.AddModelUrls(m.files);return"https://3dviewer.net#"+n.GetParameterList()}function f(m){var n=OV.CreateUrlBuilder();n.AddModelUrls(m.files);
n.AddCamera(m.camera);n.AddBackground(m.backgroundColor);n.AddColor(m.defaultColor);return'<iframe width="640" height="480" style="border:1px solid #eeeeee;" src="https://3dviewer.net/embed.html#'+(n.GetParameterList()+'"></iframe>')}function g(m,n){m=$("<div>").addClass("ov_dialog_copyable_input").appendTo(m);var p=$("<input>").prop("readonly",!0).appendTo(m),q=$("<div>").addClass("ov_button").addClass("outline").addClass("ov_dialog_copyable_input_button").html("copy").appendTo(m);q.click(function(){OV.CopyToClipboard(n());
q.fadeOut(200,function(){q.html("copied").fadeIn(200);setTimeout(function(){q.fadeOut(200,function(){q.html("copy").fadeIn(200)})},2E3)})});return p}if(!a.IsOnlyFileSource(OV.FileSource.Url))return OV.ShowMessageDialog("Sharing Failed","Sharing works only if you load files by url. Please upload your model files to a web server, open them by url, and try embedding again.",null);var h=a.GetFileList().GetFiles();a=[];for(var l=0;l<h.length;l++)a.push(h[l].fileUrl);h={files:a};a={files:a,camera:c,backgroundColor:b.backgroundColor,
defaultColor:b.defaultColor};var k=new OV.ButtonDialog;l=k.Init("Share",[{name:"Close",onClick:function(){k.Hide()}}]);(function(m,n){m=$("<div>").addClass("ov_dialog_section").appendTo(m);$("<div>").html("Sharing Link").addClass("ov_dialog_inner_title").appendTo(m);g(m,function(){return e(n)}).val(e(n))})(l,h);(function(m,n,p){m=$("<div>").addClass("ov_dialog_section").css("margin-top","20px").appendTo(m);$("<div>").html("Embedding Code").addClass("ov_dialog_inner_title").appendTo(m);var q=$("<div>").addClass("ov_dialog_section").appendTo(m),
r=g(m,function(){return f(p)});d(q,"Use current camera position","embed_camera",function(t){p.camera=t?c:null;r.val(f(p))});d(q,"Use overridden background color","embed_background",function(t){p.backgroundColor=t?n.backgroundColor:null;r.val(f(p))});d(q,"Use overridden default color","embed_color",function(t){p.defaultColor=t?n.defaultColor:null;r.val(f(p))});r.val(f(p))})(l,b,a);k.Show();return k};OV.ShowCookieDialog=function(a){var b=new OV.ButtonDialog,c=b.Init("Cookie Consent",[{name:"Accept",onClick:function(){b.Hide();a()}}]);$("<div>").html('This website uses cookies to offer you better user experience. See the details at the <a target="_blank" href="info/cookies.html">Cookies Policy</a> page.').addClass("ov_dialog_section").appendTo(c);b.SetCloseable(!1);b.Show();return b};OV.MaterialData=function(a){this.originalIndex=a;this.menuItem=null};OV.MaterialData.prototype.SetSelected=function(a){this.menuItem.SetSelected(a)};OV.MaterialData.prototype.CreateMenuItem=function(a,b){var c=this;this.menuItem=new OV.TreeViewButtonItem(a);this.menuItem.OnNameClick(function(){b.onSelected(c.originalIndex)});return this.menuItem};OV.MeshData=function(a){this.originalIndex=a;this.visible=!0;this.showHideButton=this.menuItem=null};OV.MeshData.prototype.IsVisible=function(){return this.visible};
OV.MeshData.prototype.SetVisible=function(a){(this.visible=a)?this.showHideButton.SetImage("visible"):this.showHideButton.SetImage("hidden")};OV.MeshData.prototype.SetSelected=function(a){this.menuItem.SetSelected(a)};
OV.MeshData.prototype.CreateMenuItem=function(a,b){var c=this;this.menuItem=new OV.TreeViewButtonItem(a);a=new OV.TreeViewButton("fit");a.OnClick(function(){b.onFitToWindow(c.originalIndex)});this.menuItem.AddButton(a);this.showHideButton=new OV.TreeViewButton("visible");this.showHideButton.OnClick(function(d){b.onShowHide(c.originalIndex)});this.menuItem.AddButton(this.showHideButton);this.menuItem.OnNameClick(function(){b.onSelected(c.originalIndex)});return this.menuItem};
OV.ModelData=function(){this.meshDataArr=[];this.materialDataArr=[]};OV.ModelData.prototype.MaterialCount=function(){return this.materialDataArr.length};OV.ModelData.prototype.GetMaterialData=function(a){return this.materialDataArr[a]};OV.ModelData.prototype.AddMaterialData=function(a){this.materialDataArr.push(a)};OV.ModelData.prototype.MeshCount=function(){return this.meshDataArr.length};OV.ModelData.prototype.GetMeshData=function(a){return this.meshDataArr[a]};
OV.ModelData.prototype.AddMeshData=function(a){this.meshDataArr.push(a)};OV.ModelData.prototype.Clear=function(){this.meshDataArr=[];this.materialDataArr=[]};OV.SelectionType={Material:1,Mesh:2};OV.Selection=function(a,b){this.type=a;this.index=b};OV.NavigatorInfoPanel=function(a){this.parentDiv=a;this.popup=null};
OV.NavigatorInfoPanel.prototype.FillWithMaterialInfo=function(a,b){var c=this;this.Clear();if(null!==a){for(var d=[],e=0;e<a.length;e++)d.push({name:OV.GetMeshName(a[e].name)});this.CreateButton(this.parentDiv,"Meshes ("+d.length+")",function(f){0!==d.length&&(c.popup=OV.ShowListPopup(d,{calculatePosition:function(g){return OV.CalculatePopupPositionToElementBottomRight(f,g)},onHoverStart:function(g){b.onMeshHover(a[g].index)},onHoverStop:function(g){b.onMeshHover(null)},onClick:function(g){b.onMeshSelect(a[g].index)}}))})}};
OV.NavigatorInfoPanel.prototype.FillWithModelInfo=function(a,b){var c=this;this.Clear();if(null!==a){for(var d=[],e=0;e<a.length;e++){var f=a[e];d.push({name:OV.GetMaterialName(f.name),color:f.color})}this.CreateButton(this.parentDiv,"Materials ("+d.length+")",function(g){c.popup=OV.ShowListPopup(d,{calculatePosition:function(h){return OV.CalculatePopupPositionToElementBottomRight(g,h)},onClick:function(h){b.onMaterialSelect(a[h].index)}})})}};
OV.NavigatorInfoPanel.prototype.CreateButton=function(a,b,c){var d=$("<div>").addClass("ov_navigator_info_button").appendTo(a);$("<div>").addClass("ov_navigator_info_button_text").html(b).appendTo(d);OV.CreateSvgIcon(d,"arrow_right","ov_navigator_info_button_icon");d.click(function(){c(d)})};OV.NavigatorInfoPanel.prototype.Clear=function(){null!==this.popup&&(this.popup.Hide(),this.popup=null);this.parentDiv.empty()};
OV.Navigator=function(a){this.parentDiv=a;this.callbacks=null;this.titleDiv=$("<div>").addClass("ov_navigator_tree_title").appendTo(a);this.treeDiv=$("<div>").addClass("ov_navigator_tree_panel").addClass("ov_thin_scrollbar").appendTo(a);this.infoDiv=$("<div>").addClass("ov_navigator_info_panel").addClass("ov_thin_scrollbar").appendTo(a);this.treeView=new OV.TreeView(this.treeDiv);this.infoPanel=new OV.NavigatorInfoPanel(this.infoDiv);this.modelData=new OV.ModelData;this.tempSelectedMeshIndex=this.selection=
null};OV.Navigator.prototype.Init=function(a){this.callbacks=a};OV.Navigator.prototype.Resize=function(){var a=this.titleDiv.outerHeight(!0),b=this.infoDiv.outerHeight(!0),c=this.parentDiv.height();this.treeDiv.outerHeight(c-b-a,!0)};
OV.Navigator.prototype.FillTree=function(a){var b=this;this.titleDiv.html(a.mainFile).attr("title",a.mainFile);var c=a.model,d=a.usedFiles;a=a.missingFiles;var e=new OV.TreeViewGroupItem("Files","files");this.treeView.AddItem(e);for(var f=0;f<d.length;f++){var g=new OV.TreeViewSingleItem(d[f]);e.AddChild(g)}if(0<a.length)for(d=new OV.TreeViewGroupItem("Missing Files","missing_files"),this.treeView.AddItem(d),e=0;e<a.length;e++)f=new OV.TreeViewButtonItem(a[e]),g=new OV.TreeViewButton("open"),g.OnClick(function(){b.callbacks.openFileBrowserDialog()}),
f.AddButton(g),d.AddChild(f);a=new OV.TreeViewGroupItem("Materials","materials");this.treeView.AddItem(a);for(d=0;d<c.MaterialCount();d++)e=c.GetMaterial(d),f=OV.GetMaterialName(e.name),e=new OV.MaterialData(d),f=e.CreateMenuItem(f,{onSelected:function(h){b.SetSelection(new OV.Selection(OV.SelectionType.Material,h))}}),this.modelData.AddMaterialData(e),a.AddChild(f);a=new OV.TreeViewGroupItem("Meshes","meshes");this.treeView.AddItem(a);a.ShowChildren(!0,null);for(d=0;d<c.MeshCount();d++)f=c.GetMesh(d),
e=new OV.MeshData(d),f=OV.GetMeshName(f.GetName()),f=e.CreateMenuItem(f,{onShowHide:function(h){b.ToggleMeshVisibility(h)},onIsolate:function(h){b.IsolateMesh(h)},onFitToWindow:function(h){b.FitMeshToWindow(h)},onSelected:function(h){b.SetSelection(new OV.Selection(OV.SelectionType.Mesh,h))}}),this.modelData.AddMeshData(e),a.AddChild(f);this.UpdateInfoPanel();this.Resize()};OV.Navigator.prototype.MeshCount=function(){return this.modelData.MeshCount()};OV.Navigator.prototype.IsMeshVisible=function(a){return this.modelData.GetMeshData(a).IsVisible()};
OV.Navigator.prototype.HasHiddenMesh=function(){for(var a=0;a<this.modelData.MeshCount();a++)if(!this.modelData.GetMeshData(a).IsVisible())return!0;return!1};OV.Navigator.prototype.ShowAllMeshes=function(){for(var a=0;a<this.modelData.MeshCount();a++)this.modelData.GetMeshData(a).SetVisible(!0);this.callbacks.updateMeshesVisibility()};OV.Navigator.prototype.ToggleMeshVisibility=function(a){a=this.modelData.GetMeshData(a);a.SetVisible(!a.IsVisible());this.callbacks.updateMeshesVisibility()};
OV.Navigator.prototype.IsMeshIsolated=function(a){for(var b=0;b<this.modelData.MeshCount();b++){var c=this.modelData.GetMeshData(b);if(b!==a&&c.IsVisible())return!1}return!0};OV.Navigator.prototype.IsolateMesh=function(a){for(var b=this.IsMeshIsolated(a),c=0;c<this.modelData.MeshCount();c++){var d=this.modelData.GetMeshData(c);c===a||b?d.SetVisible(!0):d.SetVisible(!1)}this.callbacks.updateMeshesVisibility()};
OV.Navigator.prototype.GetSelectedMeshIndex=function(){return null!==this.tempSelectedMeshIndex?this.tempSelectedMeshIndex:null===this.selection||this.selection.type!==OV.SelectionType.Mesh?null:this.selection.index};OV.Navigator.prototype.SetTempSelectedMeshIndex=function(a){this.tempSelectedMeshIndex=a;this.callbacks.updateMeshesSelection()};
OV.Navigator.prototype.SetSelection=function(a){function b(d,e,f){e.type===OV.SelectionType.Material?d.modelData.GetMaterialData(e.index).SetSelected(f):e.type===OV.SelectionType.Mesh&&d.modelData.GetMeshData(e.index).SetSelected(f)}var c=this.selection;null!==c&&b(this,c,!1);this.selection=a;this.UpdateInfoPanel();this.tempSelectedMeshIndex=null;null!==this.selection&&(null!==c&&this.selection.type===c.type&&this.selection.index===c.index?(b(this,this.selection,!1),this.selection=null,this.UpdateInfoPanel()):
b(this,this.selection,!0));this.callbacks.updateMeshesSelection()};OV.Navigator.prototype.FitMeshToWindow=function(a){this.callbacks.fitMeshToWindow(a)};
OV.Navigator.prototype.UpdateInfoPanel=function(){var a=this;if(null===this.selection){var b=this.callbacks.getMaterialsForModel();this.infoPanel.FillWithModelInfo(b,{onMaterialSelect:function(c){a.SetSelection(new OV.Selection(OV.SelectionType.Material,c))}});this.callbacks.onModelSelected()}else this.selection.type===OV.SelectionType.Material?(b=this.callbacks.getMeshesForMaterial(this.selection.index),this.infoPanel.FillWithMaterialInfo(b,{onMeshHover:function(c){a.SetTempSelectedMeshIndex(c)},
onMeshSelect:function(c){a.SetSelection(new OV.Selection(OV.SelectionType.Mesh,c))}}),this.callbacks.onMaterialSelected(this.selection.index)):this.selection.type===OV.SelectionType.Mesh&&(b=this.callbacks.getMaterialsForMesh(this.selection.index),this.infoPanel.FillWithModelInfo(b,{onMaterialSelect:function(c){a.SetSelection(new OV.Selection(OV.SelectionType.Material,c))}}),this.callbacks.onMeshSelected(this.selection.index));this.Resize()};
OV.Navigator.prototype.Clear=function(){this.titleDiv.empty();this.treeView.Clear();this.infoPanel.Clear();this.modelData.Clear();this.selection=null};OV.SidebarPanel=function(a){this.parentDiv=a;this.panelDiv=$("<div>").appendTo(this.parentDiv).hide();this.contentDiv=this.titleDiv=null;this.visible=!1};
OV.SidebarPanel.prototype.Init=function(a){this.titleDiv=$("<div>").addClass("ov_sidebar_title").appendTo(this.panelDiv);this.contentDiv=$("<div>").addClass("ov_sidebar_content").addClass("ov_thin_scrollbar").appendTo(this.panelDiv);$("<div>").addClass("ov_sidebar_title_text").html(this.GetTitle()).appendTo(this.titleDiv);OV.CreateSvgIcon(this.titleDiv,"close","ov_sidebar_title_img").click(function(){a.onClose()})};OV.SidebarPanel.prototype.GetTitle=function(){return""};
OV.SidebarPanel.prototype.Show=function(a){(this.visible=a)?this.panelDiv.show():this.panelDiv.hide()};OV.SidebarPanel.prototype.IsVisible=function(){return this.visible};OV.SidebarPanel.prototype.Resize=function(){var a=this.titleDiv.outerHeight(!0),b=this.parentDiv.height();this.contentDiv.outerHeight(b-a,!0)};OV.SidebarPanel.prototype.Clear=function(){this.contentDiv.empty()};OV.SidebarPanel.prototype.HidePopups=function(){};OV.DetailsSidebarPanel=function(a){OV.SidebarPanel.call(this,a)};$jscomp.inherits(OV.DetailsSidebarPanel,OV.SidebarPanel);OV.DetailsSidebarPanel.prototype.GetTitle=function(){return"Details"};
OV.DetailsSidebarPanel.prototype.AddElementProperties=function(a){this.Clear();var b=$("<div>").addClass("ov_property_table").appendTo(this.contentDiv),c=OV.GetBoundingBox(a);c=OV.SubCoord3D(c.max,c.min);this.AddProperty(b,new OV.Property(OV.PropertyType.Integer,"Vertex Count",a.VertexCount()));this.AddProperty(b,new OV.Property(OV.PropertyType.Integer,"Triangle Count",a.TriangleCount()));this.AddProperty(b,new OV.Property(OV.PropertyType.Number,"Size X",c.x));this.AddProperty(b,new OV.Property(OV.PropertyType.Number,
"Size Y",c.y));this.AddProperty(b,new OV.Property(OV.PropertyType.Number,"Size Z",c.z));this.AddCalculatedProperty(b,"Volume",function(){var g=OV.CalculateVolume(a);return null===g?null:new OV.Property(OV.PropertyType.Number,null,g)});this.AddCalculatedProperty(b,"Surface Area",function(){var g=OV.CalculateSurfaceArea(a);return null===g?null:new OV.Property(OV.PropertyType.Number,null,g)});if(0<a.PropertyGroupCount())for(b=$("<div>").addClass("ov_property_table ov_property_table_custom").appendTo(this.contentDiv),
c=0;c<a.PropertyGroupCount();c++){var d=a.GetPropertyGroup(c);this.AddPropertyGroup(b,d);for(var e=0;e<d.PropertyCount();e++){var f=d.GetProperty(e);this.AddPropertyInGroup(b,f)}}this.Resize()};
OV.DetailsSidebarPanel.prototype.AddMaterialProperties=function(a){function b(e,f,g,h){null!==h&&null!==h.name&&(h=OV.GetFileName(h.name),e.AddProperty(f,new OV.Property(OV.PropertyType.Text,g,h)))}this.Clear();var c=$("<div>").addClass("ov_property_table").appendTo(this.contentDiv),d=null;a.type===OV.MaterialType.Phong?d="Phong":a.type===OV.MaterialType.Physical&&(d="Physical");this.AddProperty(c,new OV.Property(OV.PropertyType.Text,"Source",a.isDefault?"Default":"Model"));this.AddProperty(c,new OV.Property(OV.PropertyType.Text,
"Type",d));this.AddProperty(c,new OV.Property(OV.PropertyType.Color,"Color",a.color));a.type===OV.MaterialType.Physical&&(this.AddProperty(c,new OV.Property(OV.PropertyType.Percent,"Metalness",a.metalness)),this.AddProperty(c,new OV.Property(OV.PropertyType.Percent,"Roughness",a.roughness)));this.AddProperty(c,new OV.Property(OV.PropertyType.Percent,"Opacity",a.opacity));b(this,c,"Diffuse Map",a.diffuseMap);b(this,c,"Specular Map",a.specularMap);b(this,c,"Bump Map",a.bumpMap);b(this,c,"Normal Map",
a.normalMap);b(this,c,"Emissive Map",a.emissiveMap);b(this,c,"Metallic Map",a.metalnessMap);this.Resize()};OV.DetailsSidebarPanel.prototype.AddPropertyGroup=function(a,b){$("<div>").addClass("ov_property_table_row group").appendTo(a).html(b.name).attr("title",b.name)};
OV.DetailsSidebarPanel.prototype.AddProperty=function(a,b){a=$("<div>").addClass("ov_property_table_row").appendTo(a);var c=$("<div>").addClass("ov_property_table_cell ov_property_table_name").appendTo(a),d=$("<div>").addClass("ov_property_table_cell ov_property_table_value").appendTo(a);c.html(b.name+":").attr("title",b.name);this.DisplayPropertyValue(b,d);return a};OV.DetailsSidebarPanel.prototype.AddPropertyInGroup=function(a,b){this.AddProperty(a,b).addClass("ingroup")};
OV.DetailsSidebarPanel.prototype.AddCalculatedProperty=function(a,b,c){var d=this;a=$("<div>").addClass("ov_property_table_row").appendTo(a);var e=$("<div>").addClass("ov_property_table_cell ov_property_table_name").appendTo(a),f=$("<div>").addClass("ov_property_table_cell ov_property_table_value").appendTo(a);e.html(b+":").attr("title",b);$("<div>").addClass("ov_property_table_button").html("Calculate...").appendTo(f).click(function(){f.empty();f.html("Please wait...");OV.RunTaskAsync(function(){var g=
c();null===g?f.html("-"):d.DisplayPropertyValue(g,f)})})};
OV.DetailsSidebarPanel.prototype.DisplayPropertyValue=function(a,b){b.empty();var c=null;if(a.type===OV.PropertyType.Text)c=a.value;else if(a.type===OV.PropertyType.Integer)c=a.value.toLocaleString();else if(a.type===OV.PropertyType.Number)c=a.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});else if(a.type===OV.PropertyType.Boolean)c=a.value?"True":"False";else if(a.type===OV.PropertyType.Percent)c=parseInt(100*a.value,10).toString()+"%";else if(a.type===OV.PropertyType.Color){var d=
"#"+OV.ColorToHexString(a.value);OV.CreateInlineColorCircle(a.value).appendTo(b);$("<span>").html(d).appendTo(b)}null!==c&&b.html(c).attr("title",c)};OV.SettingsSidebarPanel=function(a){OV.SidebarPanel.call(this,a);this.defaultColorWarning=this.defaultColorInput=this.backgroundColorInput=null};$jscomp.inherits(OV.SettingsSidebarPanel,OV.SidebarPanel);OV.SettingsSidebarPanel.prototype.GetTitle=function(){return"Settings"};OV.SettingsSidebarPanel.prototype.HidePopups=function(){this.backgroundColorInput.pickr.hide();this.defaultColorInput.pickr.hide()};
OV.SettingsSidebarPanel.prototype.InitSettings=function(a,b,c){this.backgroundColorInput=this.AddColorParameter("Background Color","Background color affects only the visualization of the model.",null,"#ffffff #e3e3e3 #c9c9c9 #898989 #5f5f5f #494949 #383838 #0f0f0f".split(" "),a.backgroundColor,c.onBackgroundColorChange);this.defaultColorInput=this.AddColorParameter("Default Color","Default color appears when the model doesn't contain materials.","This setting has no effect on the currently loaded file.",
"#ffffff #e3e3e3 #cc3333 #fac832 #4caf50 #3393bd #9b27b0 #fda4b8".split(" "),a.defaultColor,c.onDefaultColorChange);this.AddResetToDefaultsButton(b,c)};OV.SettingsSidebarPanel.prototype.Update=function(a){OV.HasDefaultMaterial(a)?this.defaultColorInput.warning.hide():this.defaultColorInput.warning.show();this.Resize()};
OV.SettingsSidebarPanel.prototype.AddColorParameter=function(a,b,c,d,e,f){var g=$("<div>").addClass("ov_sidebar_settings_content").appendTo(this.contentDiv),h=$("<div>").addClass("ov_sidebar_subtitle").appendTo(g),l=$("<div>").addClass("color-picker").addClass("ov_sidebar_color").appendTo(h);$("<span>").html(a).appendTo(h);a=Pickr.create({el:l.get(0),theme:"monolith",appClass:"ov_sidebar_color",position:"left-start",swatches:d,comparison:!1,default:"#"+OV.ColorToHexString(e),components:{preview:!1,
opacity:!1,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!1}}});a.on("change",function(k,m,n){k=k.toRGBA();k=new OV.Color(parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10));f(k)});$("<div>").addClass("ov_sidebar_settings_description").html(b).appendTo(g);b=null;null!==c&&(b=$("<div>").addClass("ov_sidebar_settings_description").appendTo(g),OV.CreateSvgIcon(b,"warning","left_inline light"),$("<div>").addClass("ov_sidebar_settings_warning").html(c).appendTo(b));
return{pickr:a,warning:b}};OV.SettingsSidebarPanel.prototype.AddResetToDefaultsButton=function(a,b){var c=this;$("<div>").addClass("ov_button").addClass("outline").addClass("ov_sidebar_button").html("Reset to Default").appendTo(this.contentDiv).click(function(){c.backgroundColorInput.pickr.setColor("#"+OV.ColorToHexString(a.backgroundColor));c.defaultColorInput.pickr.setColor("#"+OV.ColorToHexString(a.defaultColor));b.onBackgroundColorChange(a.backgroundColor);b.onDefaultColorChange(a.defaultColor)})};OV.Sidebar=function(a){this.parentDiv=a;this.visible=!0;this.contentDiv=this.titleDiv=null;this.panels=[]};OV.Sidebar.prototype.AddPanel=function(a){this.panels.push(a);return this.panels.length-1};OV.Sidebar.prototype.GetPanel=function(a){return this.panels[a]};OV.Sidebar.prototype.Show=function(a){if(null!==a){this.visible=!0;this.parentDiv.show();for(var b=0;b<this.panels.length;b++){var c=this.panels[b];b===a?c.Show(!0):c.Show(!1)}}else this.visible=!1,this.parentDiv.hide()};
OV.Sidebar.prototype.IsVisible=function(){return this.visible};OV.Sidebar.prototype.GetVisiblePanelId=function(){if(!this.visible)return null;for(var a=0;a<this.panels.length;a++)if(this.panels[a].IsVisible())return a;return null};OV.Sidebar.prototype.HidePopups=function(){for(var a=0;a<this.panels.length;a++)this.panels[a].HidePopups()};OV.Sidebar.prototype.Resize=function(){for(var a=0;a<this.panels.length;a++)this.panels[a].Resize()};OV.HashHandler=function(){this.skipNextEvent=!1;this.eventListener=null};OV.HashHandler.prototype.SetEventListener=function(a){this.eventListener=a;window.onhashchange=this.OnChange.bind(this)};OV.HashHandler.prototype.SkipNextEventHandler=function(){this.skipNextEvent=!0};OV.HashHandler.prototype.HasHash=function(){return 0<this.GetHash().length};OV.HashHandler.prototype.ClearHash=function(){this.SetHash("")};OV.HashHandler.prototype.GetModelFilesFromHash=function(){return OV.CreateUrlParser(this.GetHash()).GetModelUrls()};
OV.HashHandler.prototype.SetModelFilesToHash=function(a){a=OV.CreateModelUrlParameters(a);this.SetHash(a)};OV.HashHandler.prototype.GetCameraFromHash=function(){return OV.CreateUrlParser(this.GetHash()).GetCamera()};OV.HashHandler.prototype.GetBackgroundFromHash=function(){return OV.CreateUrlParser(this.GetHash()).GetBackgroundColor()};OV.HashHandler.prototype.GetDefaultColorFromHash=function(){return OV.CreateUrlParser(this.GetHash()).GetDefaultColor()};OV.HashHandler.prototype.GetHash=function(){return window.location.hash.substr(1)};
OV.HashHandler.prototype.SetHash=function(a){window.location.hash=a};OV.HashHandler.prototype.OnChange=function(){this.skipNextEvent?this.skipNextEvent=!1:this.eventListener()};OV.InitModelLoader=function(a,b){var c=null,d=null;a.Init({onLoadStart:function(){var e=c;null!==e&&e.Hide();b.onStart();d=new OV.ProgressDialog;d.Init("Loading Model");d.Show()},onImportStart:function(){d.SetText("Importing Model")},onVisualizationStart:function(){d.SetText("Visualizing Model")},onModelFinished:function(e,f){d.Hide();b.onFinish(e,f)},onTextureLoaded:function(){b.onRender()},onLoadError:function(e){d.Hide();b.onError(e);c=e.code===OV.ImportErrorCode.NoImportableFile?OV.ShowMessageDialog("Something went wrong",
"No importable file found. You can open obj, 3ds, stl, ply, gltf, glb, 3dm, fbx, and off files.",e.message):e.code===OV.ImportErrorCode.ImportFailed?OV.ShowMessageDialog("Something went wrong","Failed to import model.",e.message):OV.ShowMessageDialog("Something went wrong","Unknown error.",e.message)}})};OV.WebsiteSettings=function(){this.backgroundColor=new OV.Color(255,255,255);this.defaultColor=new OV.Color(200,200,200)};OV.WebsiteSettings.prototype.LoadFromCookies=function(a){this.backgroundColor=a.GetColorVal("ov_background_color",new OV.Color(255,255,255));this.defaultColor=a.GetColorVal("ov_default_color",new OV.Color(200,200,200))};OV.WebsiteSettings.prototype.SaveToCookies=function(a){a.SetColorVal("ov_background_color",this.backgroundColor);a.SetColorVal("ov_default_color",this.defaultColor)};
OV.Website=function(a){this.parameters=a;this.viewer=new OV.Viewer;this.hashHandler=new OV.HashHandler;this.cookieHandler=new OV.CookieHandler;this.toolbar=new OV.Toolbar(this.parameters.toolbarDiv);this.sidebar=new OV.Sidebar(this.parameters.sidebarDiv);this.navigator=new OV.Navigator(this.parameters.navigatorDiv);this.eventHandler=new OV.EventHandler(this.parameters.eventHandler);this.settings=new OV.WebsiteSettings;this.modelLoader=new OV.ThreeModelLoader;this.highlightMaterial=new THREE.MeshPhongMaterial({color:9357808,
side:THREE.DoubleSide});this.dialog=this.model=this.settingsPanel=this.detailsPanel=null};
OV.Website.prototype.Load=function(){var a=this;this.settings.LoadFromCookies(this.cookieHandler);this.InitViewer();this.InitToolbar();this.InitDragAndDrop();this.InitModelLoader();this.InitSidebar();this.InitNavigator();this.InitCookieConsent();this.viewer.SetClickHandler(this.OnModelClicked.bind(this));this.viewer.SetContextMenuHandler(this.OnModelContextMenu.bind(this));this.Resize();this.hashHandler.SetEventListener(this.OnHashChange.bind(this));this.OnHashChange();$(window).on("resize",function(){a.Resize()})};
OV.Website.prototype.Resize=function(){var a=$(window).outerWidth(),b=$(window).outerHeight(),c=parseInt(this.parameters.headerDiv.outerHeight(!0),10),d=0,e=0,f=0;OV.IsSmallWidth()||(d=parseInt(this.parameters.navigatorDiv.outerWidth(!0),10),this.sidebar.IsVisible()&&(e=parseInt(this.parameters.sidebarDiv.outerWidth(!0),10)),f=1);a=a-d-e-f;b=b-c-f;this.parameters.navigatorDiv.outerHeight(b,!0);this.parameters.sidebarDiv.outerHeight(b,!0);this.parameters.introDiv.outerHeight(b,!0);this.navigator.Resize();
this.sidebar.Resize();this.viewer.Resize(a,b)};OV.Website.prototype.ShowViewer=function(a){a?(this.parameters.mainDiv.show(),this.Resize()):this.parameters.mainDiv.hide()};OV.Website.prototype.ClearModel=function(){this.HidePopups();this.model=null;this.parameters.introDiv.hide();this.ShowViewer(!1);this.viewer.Clear();this.navigator.Clear()};OV.Website.prototype.HidePopups=function(){null!==this.dialog&&(this.dialog.Hide(),this.dialog=null);this.sidebar.HidePopups()};
OV.Website.prototype.OnModelFinished=function(a,b){var c=OV.GetFileExtension(a.mainFile);this.eventHandler.HandleEvent("model_loaded",{extension:c});this.model=a.model;this.ShowViewer(!0);this.viewer.AddMeshes(b);this.viewer.SetUpVector(a.upVector,!1);this.navigator.FillTree(a);this.settingsPanel.Update(this.model);this.FitModelToWindow(!0)};
OV.Website.prototype.OnModelClicked=function(a,b){1===a&&(a=this.viewer.GetMeshUserDataUnderMouse(b),null===a?this.navigator.SetSelection(null):this.navigator.SetSelection(new OV.Selection(OV.SelectionType.Mesh,a.originalMeshIndex)))};
OV.Website.prototype.OnModelContextMenu=function(a,b){var c=this;b=this.viewer.GetMeshUserDataUnderMouse(b);var d=[];if(null===b)d.push({name:"Fit model to window",icon:"fit",onClick:function(){c.FitModelToWindow(!1)}}),this.navigator.HasHiddenMesh()&&d.push({name:"Show all meshes",icon:"visible",onClick:function(){c.navigator.ShowAllMeshes()}});else{var e=b.originalMeshIndex;d.push({name:"Hide mesh",icon:"hidden",onClick:function(){c.navigator.ToggleMeshVisibility(e)}});d.push({name:"Fit mesh to window",
icon:"fit",onClick:function(){c.navigator.FitMeshToWindow(e)}});1<this.navigator.MeshCount()&&(b=this.navigator.IsMeshIsolated(e),d.push({name:b?"Remove isolation":"Isolate mesh",icon:b?"deisolate":"isolate",onClick:function(){c.navigator.IsolateMesh(e)}}))}this.dialog=OV.ShowListPopup(d,{calculatePosition:function(f){return OV.CalculatePopupPositionToScreen(a,f)},onClick:function(f){d[f].onClick()}})};OV.Website.prototype.OpenFileBrowserDialog=function(){this.parameters.fileInput.trigger("click")};
OV.Website.prototype.FitModelToWindow=function(a){var b=this,c=!a,d=this.viewer.GetBoundingSphere(function(e){return b.navigator.IsMeshVisible(e.originalMeshIndex)});a&&this.viewer.AdjustClippingPlanesToSphere(d);this.viewer.FitSphereToWindow(d,c)};OV.Website.prototype.FitMeshToWindow=function(a){var b=this.viewer.GetBoundingSphere(function(c){return c.originalMeshIndex===a});this.viewer.FitSphereToWindow(b,!0)};OV.Website.prototype.UpdateMeshesVisibility=function(){var a=this;this.viewer.SetMeshesVisibility(function(b){return a.navigator.IsMeshVisible(b.originalMeshIndex)})};
OV.Website.prototype.UpdateMeshesSelection=function(){var a=this.navigator.GetSelectedMeshIndex();this.viewer.SetMeshesHighlight(this.highlightMaterial,function(b){return b.originalMeshIndex===a?!0:!1})};OV.Website.prototype.LoadModelFromUrlList=function(a,b){this.modelLoader.LoadFromUrlList(a,b);this.ClearHashIfNotOnlyUrlList()};OV.Website.prototype.LoadModelFromFileList=function(a){var b=new OV.ImportSettings;b.defaultColor=this.settings.defaultColor;this.modelLoader.LoadFromFileList(a,b);this.ClearHashIfNotOnlyUrlList()};
OV.Website.prototype.ClearHashIfNotOnlyUrlList=function(){!this.modelLoader.GetImporter().IsOnlyFileSource(OV.FileSource.Url)&&this.hashHandler.HasHash()&&(this.hashHandler.SkipNextEventHandler(),this.hashHandler.ClearHash())};
OV.Website.prototype.OnHashChange=function(){if(this.hashHandler.HasHash()){var a=this.hashHandler.GetModelFilesFromHash();if(null!==a){var b=new OV.ImportSettings;b.defaultColor=this.settings.defaultColor;var c=this.hashHandler.GetDefaultColorFromHash();null!==c&&(b.defaultColor=c);this.eventHandler.HandleEvent("model_load_started",{source:"hash"});this.LoadModelFromUrlList(a,b)}}else this.ClearModel(),this.parameters.introDiv.show()};
OV.Website.prototype.InitViewer=function(){var a=$("<canvas>").appendTo(this.parameters.viewerDiv);this.viewer.Init(a.get(0));this.viewer.SetBackgroundColor(this.settings.backgroundColor);this.viewer.SetEnvironmentMap("assets/envmaps/fishermans_bastion/posx.jpg assets/envmaps/fishermans_bastion/negx.jpg assets/envmaps/fishermans_bastion/posy.jpg assets/envmaps/fishermans_bastion/negy.jpg assets/envmaps/fishermans_bastion/posz.jpg assets/envmaps/fishermans_bastion/negz.jpg".split(" "));this.ShowViewer(!1)};
OV.Website.prototype.InitToolbar=function(){function a(e,f,g,h,l,k){e=e.AddImageButton(g,h,function(){f.HandleEvent("toolbar_clicked",{item:g});k()});l&&e.AddClass("only_full_width");return e}function b(e,f){e=e.AddSeparator();f&&e.addClass("only_full_width")}var c=this,d=this.modelLoader.GetImporter();a(this.toolbar,this.eventHandler,"open","Open model from your device",!1,function(){c.OpenFileBrowserDialog()});a(this.toolbar,this.eventHandler,"open_url","Open model from a url",!1,function(){c.dialog=
OV.ShowOpenUrlDialog(function(e){0<e.length&&c.hashHandler.SetModelFilesToHash(e)})});b(this.toolbar);a(this.toolbar,this.eventHandler,"fit","Fit model to window",!1,function(){c.FitModelToWindow(!1)});a(this.toolbar,this.eventHandler,"up_y","Set Y axis as up vector",!1,function(){c.viewer.SetUpVector(OV.Direction.Y,!0)});a(this.toolbar,this.eventHandler,"up_z","Set Z axis as up vector",!1,function(){c.viewer.SetUpVector(OV.Direction.Z,!0)});a(this.toolbar,this.eventHandler,"flip","Flip up vector",
!1,function(){c.viewer.FlipUpVector()});b(this.toolbar);(function(e,f,g,h,l,k,m){for(var n=[],p=0;p<g.length;p++)n.push({image:g[p],title:h[p]});e=e.AddImageRadioButton(n,l,function(q){f.HandleEvent("toolbar_clicked",{item:g[q]});m(q)});if(k)for(k=0;k<e.length;k++)e[k].AddClass("only_full_width")})(this.toolbar,this.eventHandler,["fix_up_on","fix_up_off"],["Fixed up vector","Free orbit"],0,!1,function(e){0===e?c.viewer.SetFixUpVector(!0):1===e&&c.viewer.SetFixUpVector(!1)});b(this.toolbar,!0);a(this.toolbar,
this.eventHandler,"export","Export model",!0,function(){(new OV.ExportDialog({onDialog:function(e){c.dialog=e}})).Show(c.model,c.viewer)});a(this.toolbar,this.eventHandler,"share","Share model",!0,function(){c.dialog=OV.ShowSharingDialog(d,c.settings,c.viewer.GetCamera())});this.parameters.fileInput.on("change",function(e){0<e.target.files.length&&(c.eventHandler.HandleEvent("model_load_started",{source:"open_file"}),c.LoadModelFromFileList(e.target.files))})};
OV.Website.prototype.InitDragAndDrop=function(){var a=this;window.addEventListener("dragstart",function(b){b.preventDefault()},!1);window.addEventListener("dragover",function(b){b.stopPropagation();b.preventDefault();b.dataTransfer.dropEffect="copy"},!1);window.addEventListener("drop",function(b){b.stopPropagation();b.preventDefault();0<b.dataTransfer.files.length&&(a.eventHandler.HandleEvent("model_load_started",{source:"drop"}),a.LoadModelFromFileList(b.dataTransfer.files))},!1)};
OV.Website.prototype.InitModelLoader=function(){var a=this;OV.InitModelLoader(this.modelLoader,{onStart:function(){a.ClearModel()},onFinish:function(b,c){a.OnModelFinished(b,c)},onRender:function(){a.viewer.Render()},onError:function(b){var c="unknown";b.code===OV.ImportErrorCode.NoImportableFile?c="no_importable_file":b.code===OV.ImportErrorCode.ImportFailed&&(c="import_failed");b=[];for(var d=a.modelLoader.GetImporter().GetFileList().GetFiles(),e=0;e<d.length;e++)b.push(d[e].extension);a.eventHandler.HandleEvent("model_load_failed",
{reason:c,extensions:b})}})};
OV.Website.prototype.InitSidebar=function(){function a(g,h,l,k){g=g.AddImageButton(l.image,l.title,function(){h.HandleEvent("sidebar_clicked",{item:l.image});k()});g.AddClass("only_full_width");g.AddClass("right");return g}function b(g,h,l,k){g.Show(k);k=g.GetVisiblePanelId();for(var m=0;m<l.length;m++){var n=l[m];n.panelId===k?n.button.AddImageClass("selected"):n.button.RemoveImageClass("selected")}h.SetBoolVal("ov_show_sidebar",g.IsVisible())}var c=this;this.detailsPanel=new OV.DetailsSidebarPanel(this.parameters.sidebarDiv);
this.settingsPanel=new OV.SettingsSidebarPanel(this.parameters.sidebarDiv);for(var d=[{panelId:null,panel:this.detailsPanel,image:"details",title:"Details panel",button:null},{panelId:null,panel:this.settingsPanel,image:"settings",title:"Settings panel",button:null}],e={},f=0;f<d.length;e={$jscomp$loop$prop$sidebarPanel$20:e.$jscomp$loop$prop$sidebarPanel$20},f++)e.$jscomp$loop$prop$sidebarPanel$20=d[f],e.$jscomp$loop$prop$sidebarPanel$20.panelId=this.sidebar.AddPanel(e.$jscomp$loop$prop$sidebarPanel$20.panel),
e.$jscomp$loop$prop$sidebarPanel$20.button=a(this.toolbar,this.eventHandler,e.$jscomp$loop$prop$sidebarPanel$20,function(g){return function(){var h=c.sidebar,l=c.cookieHandler,k=g.$jscomp$loop$prop$sidebarPanel$20.panelId;h.GetVisiblePanelId()!==k?b(h,l,d,k):b(h,l,d,null);c.Resize()}}(e)),e.$jscomp$loop$prop$sidebarPanel$20.panel.Init({onClose:function(){b(c.sidebar,c.cookieHandler,d,null);c.Resize()}});e=new OV.WebsiteSettings;this.settingsPanel.InitSettings(this.settings,e,{onBackgroundColorChange:function(g){c.settings.backgroundColor=
g;c.settings.SaveToCookies(c.cookieHandler);c.viewer.SetBackgroundColor(g)},onDefaultColorChange:function(g){c.settings.defaultColor=g;c.settings.SaveToCookies(c.cookieHandler);null!==c.modelLoader.defaultMaterial&&(OV.ReplaceDefaultMaterialColor(c.model,g),c.modelLoader.ReplaceDefaultMaterialColor(g));c.viewer.Render()}});e=this.cookieHandler.GetBoolVal("ov_show_sidebar",!0);b(this.sidebar,this.cookieHandler,d,e?d[0].panelId:null)};
OV.Website.prototype.InitNavigator=function(){function a(f,g){var h=null;f.EnumerateMeshesUserData(function(l){l.originalMeshIndex===g&&(h=l)});return h}function b(f,g,h){var l=[];f.EnumerateMeshesUserData(function(k){if(-1!==k.originalMaterials.indexOf(h)){var m=g.GetMesh(k.originalMeshIndex);l.push({index:k.originalMeshIndex,name:m.GetName()})}});return l}function c(f,g){f=f.GetMaterial(g);return{index:g,name:f.name,color:f.color.Clone()}}function d(f,g,h){var l=[];f=a(f,h);for(h=0;h<f.originalMaterials.length;h++)l.push(c(g,
f.originalMaterials[h]));l.sort(function(k,m){return k.index-m.index});return l}var e=this;this.navigator.Init({openFileBrowserDialog:function(){e.OpenFileBrowserDialog()},updateMeshesVisibility:function(){e.UpdateMeshesVisibility()},updateMeshesSelection:function(){e.UpdateMeshesSelection()},fitMeshToWindow:function(f){e.FitMeshToWindow(f)},getMeshesForMaterial:function(f){return b(e.viewer,e.model,f)},getMaterialsForMesh:function(f){return d(e.viewer,e.model,f)},getMaterialsForModel:function(){for(var f=
e.model,g=[],h=0;h<f.MaterialCount();h++)g.push(c(f,h));return g},onModelSelected:function(){e.detailsPanel.AddElementProperties(e.model)},onMeshSelected:function(f){e.detailsPanel.AddElementProperties(e.model.GetMesh(f))},onMaterialSelected:function(f){e.detailsPanel.AddMaterialProperties(e.model.GetMaterial(f))}})};
OV.Website.prototype.InitCookieConsent=function(){var a=this;this.cookieHandler.GetBoolVal("ov_cookie_consent",!1)||OV.ShowCookieDialog(function(){a.cookieHandler.SetBoolVal("ov_cookie_consent",!0)})};OV.Embed=function(a){this.parameters=a;this.viewer=new OV.Viewer;this.hashHandler=new OV.HashHandler;this.modelLoader=new OV.ThreeModelLoader};
OV.Embed.prototype.Load=function(){var a=this,b=$("<canvas>").appendTo(this.parameters.viewerDiv);this.InitViewer(b);this.InitModelLoader();this.Resize();if(this.hashHandler.HasHash()){b=this.hashHandler.GetModelFilesFromHash();if(null===b)return;var c=this.hashHandler.GetBackgroundFromHash();null!==c&&this.viewer.SetBackgroundColor(c);c=new OV.ImportSettings;var d=this.hashHandler.GetDefaultColorFromHash();null!==d&&(c.defaultColor=d);this.modelLoader.LoadFromUrlList(b,c);b=OV.CreateModelUrlParameters(b);
b=this.parameters.websiteLinkDiv.attr("href")+"#"+b;this.parameters.websiteLinkDiv.attr("href",b)}$(window).on("resize",function(){a.Resize()})};OV.Embed.prototype.Resize=function(){var a=$(window).outerWidth(),b=$(window).outerHeight();this.viewer.Resize(a,b)};
OV.Embed.prototype.OnModelFinished=function(a,b){this.viewer.AddMeshes(b);b=this.viewer.GetBoundingSphere(function(d){return!0});this.viewer.AdjustClippingPlanesToSphere(b);var c=this.hashHandler.GetCameraFromHash();null!==c?this.viewer.SetCamera(c):this.viewer.SetUpVector(a.upVector,!1);this.viewer.FitSphereToWindow(b,!1)};OV.Embed.prototype.InitViewer=function(a){this.viewer.Init(a.get(0));this.viewer.SetEnvironmentMap("assets/envmaps/fishermans_bastion/posx.jpg assets/envmaps/fishermans_bastion/negx.jpg assets/envmaps/fishermans_bastion/posy.jpg assets/envmaps/fishermans_bastion/negy.jpg assets/envmaps/fishermans_bastion/posz.jpg assets/envmaps/fishermans_bastion/negz.jpg".split(" "))};
OV.Embed.prototype.InitModelLoader=function(){var a=this;OV.InitModelLoader(this.modelLoader,{onStart:function(){},onFinish:function(b,c){a.OnModelFinished(b,c)},onRender:function(){a.viewer.Render()},onError:function(b){}})};
